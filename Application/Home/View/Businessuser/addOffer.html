
<!DOCTYPE html>
<html lang="en">
<head>
    
    <!-- Basic page needs
    ============================================ -->
    <title></title>
    <meta charset="utf-8">
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="author" content="Magentech">
    <meta name="robots" content="index, follow" />
   
    <!-- Mobile specific metas
    ============================================ -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- Favicon
    ============================================ -->
    <link rel="shortcut icon" type="image/png" href="__PUBLIC__/Home/ico/favicon-16x16.png">
    
    <!-- 新引入 -->
    <link rel="stylesheet" href="__PUBLIC__/Home/css/main.css">
    <link rel="stylesheet" href="__PUBLIC__/Home/css/style.css">
    <link rel="stylesheet" href="__PUBLIC__/Home/css/app-orange.css" id="theme_color" />
    <!-- end -->
   
    <!-- Libs CSS
    ============================================ -->
    <link rel="stylesheet" href="__PUBLIC__/Home/css/bootstrap/css/bootstrap.min.css">
    <link href="__PUBLIC__/Home/css/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="__PUBLIC__/Home/js/datetimepicker/bootstrap-datetimepicker.min.css" rel="stylesheet">
    <link href="__PUBLIC__/Home/js/owl-carousel/owl.carousel.css" rel="stylesheet">
    <link href="__PUBLIC__/Home/css/themecss/lib.css" rel="stylesheet">

    <!-- Theme CSS
    ============================================ -->
    <link href="__PUBLIC__/Home/css/themecss/so_searchpro.css" rel="stylesheet">
    <link href="__PUBLIC__/Home/css/themecss/so_megamenu.css" rel="stylesheet">
    <link href="__PUBLIC__/Home/css/themecss/so-categories.css" rel="stylesheet">
    <link href="__PUBLIC__/Home/css/themecss/so-listing-tabs.css" rel="stylesheet">
    <link href="__PUBLIC__/Home/css/themecss/so-category-slider.css" rel="stylesheet">
    <link href="__PUBLIC__/Home/css/themecss/so-newletter-popup.css" rel="stylesheet">

    <link href="__PUBLIC__/Home/css/footer/footer1.css" rel="stylesheet">
    <link href="__PUBLIC__/Home/css/header/header1.css" rel="stylesheet">
    <link id="color_scheme" href="__PUBLIC__/Home/css/theme.css" rel="stylesheet">
    <link href="__PUBLIC__/Home/css/responsive.css" rel="stylesheet">

     <!-- Google web fonts

    ============================================ -->
    <link href='https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700' rel='stylesheet' type='text/css'>     
    <style type="text/css">
         body{font-family:'Poppins', sans-serif;}
         .cart_item td{
          text-align: center;
         }
    </style>

</head>

<body class="res layout-subpage layout-1 banners-effect-5">

    <div id="wrapper" class="wrapper-fluid">
   <!-- Header Container  -->
        <include file="common:header" />
        <!-- //Header Container  -->
  <!-- Main Container  -->
  <div class="main-container container">
    
    <div class="container">
      <div class="row">

          <!-- 商家会员中心侧边栏  -->
          <include file="common:businessUserLeftBar" />
          <!-- 商家会员中心侧边栏  -->

        <div id="contents" role="main" class="main-page col-lg-10 col-md-12 col-sm-12 col-xs-12">
        

       <div class="page type-page status-publish hentry">
        <div class="entry-content">
          <div class="entry-summary">
            <div class="woocommerce">                
                <div class="row">
          <!--Middle Part Start-->
          <div id="content" class="col-md-12 col-sm-8">
            <div class="products-category">
                   <!--  <h3 class="title-category ">Accessories</h3> -->
              <div class="category-desc">
                <div class="row">
                  <div class="bjls" style="    text-align: center;background-color: #484747;color: #fff;">
                      <h2 style="margin:8px;">报价发布</h2>
                  </div>
                  <div class="col-md-12 baojia-title">
                     <h3>选择所需要报价的商品类别</h3>
                     <span style="font-weight: 200;font-size: 12px;color: #acabab;">请首先选择品牌，再选择二级商品分类，最后选择三级商品分类。</span>
                  </div>
                  <div class="col-sm-12 list-top-1" style="padding:0px;">
                    <div class="list-pingpai-list-1" id="brandContent">
                        <div style="float:left;">
                            <ul>
                                <volist name="brand" id="row">
                                    <li onclick="getCategory2('<{$row.id}>',this)"><{$row.name}></li>
                                </volist>
                            </ul>
                        </div>
                    </div>
                  </div>

                  <div class="col-sm-12 list-top yiji" style="padding:0px;display: none;" id="category2DIV">
                      <div class="list-leixing-list-1">
                          <div style="float:left;">
                              <ul id="category2">

                              </ul>
                          </div>
                          <div class="list-pinpai-gengduo2">
                              <!--  <a href=""><span>更多</span></a> -->
                          </div>
                      </div>
                  </div>

                  <div class="col-sm-12 list-top yiji" style="padding:0px;display: none;" id="category3DIV">
                      <div class="list-leixing-list-1">
                          <div style="float:left;">
                              <ul id="category3">

                              </ul>
                          </div>
                          <div class="list-pinpai-gengduo2">
                              <!--  <a href=""><span>更多</span></a> -->
                          </div>
                      </div>
                  </div>


                  <div class="col-md-12 baojia-title">
                     <h3>商品列表</h3>
                  </div>
                  <div class="col-sm-12 list-top" style="padding:0px;background-color: #fff;">
                  <div class="baojia-list"  id="product-kong">
                      <div style="width:100%;text-align:center;line-height: 118px;">
                          <span>你还没有选择商品，点击上方的品牌试试！</span>
                      </div>
                  </div>

                    <table class="shop_table shop_table_responsive cart" cellspacing="0" style="width:100%;">
                      <thead>
                        <tr>
                          <th class="product-thumbnail">图片</th>
                          <th class="product-name">产品</th>
                          <th class="product-price">型号</th>
                          <th class="product-price">填写报价</th>
                          <th class="product-name">供货优势</th>
                          <th class="product-subtotal">操作</th>
                        </tr>
                      </thead>
                      
                      <tbody id="product">

                      </tbody>
                    </table>

                  </div>

                </div><!-- row -->
          
            </div>
          </div>
        </div>
        
        <div class="clearfix"></div>

      </div>
      </div>
    </div>
    </div>
    <!-- //Main Container -->
   </div> 
</div>

    <!-- Footer Container -->
     <include file="common:footer" />
    <!-- //end Footer Container -->

</div>
   

<!-- End Color Scheme
============================================ -->



<!-- Include Libs & Plugins
============================================ -->
<!-- Placed at the end of the document so the pages load faster -->
<script type="text/javascript" src="__PUBLIC__/Home/js/jquery-2.2.4.min.js"></script>
<script type="text/javascript" src="__PUBLIC__/Home/js/bootstrap.min.js"></script>
<script type="text/javascript" src="__PUBLIC__/Home/js/owl-carousel/owl.carousel.js"></script>
<script type="text/javascript" src="__PUBLIC__/Home/js/slick-slider/slick.js"></script>
<script type="text/javascript" src="__PUBLIC__/Home/js/themejs/libs.js"></script>

<!-- Theme files
============================================ -->

<script type="text/javascript" src="__PUBLIC__/Home/js/themejs/so_megamenu.js"></script>
<script type="text/javascript" src="__PUBLIC__/Home/js/themejs/addtocart.js"></script>


<script type="text/javascript">
var bid = '';
function getCategory2(id,obj) {
    bid = id;
    $('#category2DIV').hide();
    $('#category3DIV').hide();
    $.post('<{:U("getCategory2")}>',{bid:id},function (rs) {
        if(rs){
            rs =JSON.parse(rs);
            var content = '';
            for(var key in rs){
                var row = rs[key];
                content += '<li onclick="getCategory3(' + row.id + ',this)">' + row.name + '</li>';
            }
            $('#category2').html(content);
            $('#category2DIV').show();
        }
    })
}

function getCategory3(id,obj) {
    $('#category3DIV').hide();
    $.post('<{:U("getChildCategory")}>',{cid:id},function (rs) {
        if(rs){
            rs =JSON.parse(rs);
            var content = '';
            for(var key in rs){
                var row = rs[key];
                content += '<li onclick="getProduct(' + row.id + ',this)">' + row.name + '</li>';
            }
            $('#category3').html(content);
            $('#category3DIV').show();
        }
    })
}

var proTpl = `<tr class="cart_item cart-table">
              <td class="product-thumbnail" style="text-align: center;border: 1px solid #ccc;">
                <a href="simple_product.html">
                  <img width="180" height="180" src="{<pic1>}" class="attachment-shop_thumbnail size-shop_thumbnail wp-post-image">
                </a>
              </td>

              <td class="product-name" data-title="Product" style="text-align: center;border: 1px solid #ccc; width: 200px;">
                <a href="simple_product.html">{<name>}</a>
              </td>
              <td class="product-quantity" data-title="Quantity" style="text-align: center;border: 1px solid #ccc;">
                <div class="">
                 <span>{<type>}</span><br>
                </div>
              </td>
              <td class="product-price" data-title="Price" style="text-align: center;border: 1px solid #ccc;">
                 <input type="number" class="price" min="0" max="9999" style=" border: 1px solid #ff5e00;">
              </td>
              </td>
               <td class="product-price" data-title="Price" style="text-align: center;border: 1px solid #ccc;">
               <textarea class="info" style=" border: 1px solid #ff5e00;width: 350px"" id="BZ" name="BZ" style="height: 50px; width: 350px">最多可填写32个文字</textarea>
              </td>
              <td class="product-subtotal" data-title="Total" style="text-align: center;border: 1px solid #ccc;">
              <!--   <a href=""><i class="fa fa-pencil-square-o" aria-hidden="true" style="font-size:16px"></i></a> -->
                <a onclick="addOffer('{<id>}',this)"><span>提交</span></a>
              </td>
            </tr>`;

function getProduct(id,obj) {
    $('#product').html('');
    $.post('<{:U("getProduct")}>',{cid:id,bid:bid},function (rs) {
        if(rs){
            rs =JSON.parse(rs);
            var content = '';
            for(var key in rs){
                var tpl = proTpl;
                var row = rs[key];
                for(var key1 in row){
                    var name = '{<' + key1 + '>}';
                    tpl = tpl.replace(name,row[key1]);
                }
                content += tpl;
            }
            $('#product').html(content);
        }
    })
}
    
function addOffer(id,obj) {
    var price = $(obj).parents('tr').find('.price').val();
    var info = $(obj).parents('tr').find('.info').val();
    $.post('<{:U("setOffer")}>',{pid:id,price:price,info:info},function (rs) {
        if(rs){
            rs = JSON.parse(rs);
            if(rs['errno'] == 1){
                alert('报价成功');
                $(obj).parents('tr').remove();
            }else {
                alert(rs['msg']);
            }
        }else {
            alert('报价失败');
        }
    })
}
</script>

<script type="text/javascript">
        //多行文本输入框剩余字数计算
        function checkMaxInput(obj, maxLen) {
            if (obj == null || obj == undefined || obj == "") {
                return;
            }
            if (maxLen == null || maxLen == undefined || maxLen == "") {
                maxLen = 100;
            }

            var strResult;
            var $obj = $(obj);
            var newid = $obj.attr("id") + 'msg';

            if (obj.value.length > maxLen) {  //如果输入的字数超过了限制
                obj.value = obj.value.substring(0, maxLen); //就去掉多余的字
                strResult = '<span id="' + newid + '" class=\'Max_msg\' ><br/>剩(' + (maxLen - obj.value.length) + ')字/32</span>'; //计算并显示剩余字数
            }
            else {
                strResult = '<span id="' + newid + '" class=\'Max_msg\' ><br/>剩(' + (maxLen - obj.value.length) + ')字/32</span>'; //计算并显示剩余字数
            }

            var $msg = $("#" + newid);
            if ($msg.length == 0) {
                $obj.after(strResult);
            }
            else {
                $msg.html(strResult);
            }
        }
</script>



</body>
</html>


